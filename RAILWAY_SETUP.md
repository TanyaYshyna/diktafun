# Инструкция по развертыванию на Railway.com

## Что было исправлено в requirements.txt

### Удалены неиспользуемые зависимости:
- ❌ `Flask-Login==0.6.3` - не используется (используется Flask-JWT-Extended)
- ❌ `Flask-SQLAlchemy==3.1.1` - не используется (нет SQL базы данных)
- ❌ `Flask-WTF==1.2.2` - не используется (нет форм WTF)
- ❌ `WTForms==3.2.1` - не используется
- ❌ `SQLAlchemy==2.0.41` - не используется
- ❌ `greenlet==3.2.3` - не используется (зависимость SQLAlchemy)
- ❌ `scipy>=1.7.0` - не используется напрямую
- ❌ `chardet==3.0.4` - не используется напрямую (зависимость requests)

### Добавлено:
- ✅ `gunicorn==21.2.0` - WSGI сервер для production

## Файлы для Railway

1. **Procfile** - указывает команду запуска:
   ```
   web: gunicorn app:app
   ```

2. **runtime.txt** - указывает версию Python:
   ```
   python-3.12.0
   ```

3. **requirements.txt** - оптимизированный список зависимостей

## Настройка переменных окружения на Railway

В настройках проекта Railway добавьте следующие переменные:

1. **JWT_SECRET_KEY** - секретный ключ для JWT токенов (сгенерируйте случайную строку)
   ```
   Пример: openssl rand -hex 32
   ```

2. **FLASK_PORT** (опционально) - порт для Flask (Railway обычно использует переменную PORT автоматически)

3. **FLASK_ENV** (опционально) - установите в `production`

## Важные замечания

1. **Порт**: Railway автоматически устанавливает переменную `PORT`. Убедитесь, что `app.py` использует `os.getenv("PORT", 5000)` вместо `FLASK_PORT`.

2. **Статические файлы**: Убедитесь, что папка `static/` включена в репозиторий.

3. **База данных**: Если вы используете файловую систему для хранения данных, учтите, что на Railway файловая система эфемерная. Рассмотрите использование внешнего хранилища (S3, Railway Volumes) для постоянного хранения.

4. **Логи**: Railway автоматически собирает логи из stdout/stderr.

## Проверка перед деплоем

1. ✅ Все зависимости в requirements.txt используются в коде
2. ✅ Procfile создан и указывает правильную команду
3. ✅ runtime.txt указывает поддерживаемую версию Python
4. ✅ Переменные окружения настроены
5. ✅ Статические файлы включены в репозиторий

## Команды для локальной проверки

```bash
# Установка зависимостей
pip install -r requirements.txt

# Запуск с gunicorn (как на Railway)
gunicorn app:app --bind 0.0.0.0:5000

# Проверка синтаксиса requirements.txt
pip check
```

