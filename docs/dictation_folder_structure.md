# 🗂️ Структура папок диктантов в проекте DiktaFun

> Этот документ описывает файловую структуру хранения диктантов, включая расположение аудио, переводов, метаданных и вспомогательных файлов, а также структуру всех связанных JSON файлов.

---

## 📁 Общая структура

```plaintext
static/
└── data/
    ├── dictations/
    │   ├── dicta_001/
    │   │   ├── sentences.json ← общая информация о диктанте
    │   │   ├── en/
    │   │   │   ├── sentences.json ← список предложений из которх состоит диктант
    │   │   │   ├── 001.mp3
    │   │   │   ├── 002.mp3
    │   │   │   └── 003.mp3
    │   │   ├── ru/
    │   │   │   ├── sentences.json
    │   │   │   ├── 001.mp3
    │   │   │   ├── 002.mp3
    │   │   │   └── 003.mp3
    │   │   └── tr/
    │   │       ├── sentences.json
    │   │       ├── 001.mp3
    │   │       ├── 002.mp3
    │   │       └── 003.mp3
    │   └── dicta_002/
    │   │   ├── en/
    │   │   │   ├── sentences.json ← список предложений
    │   │   │   ├── 001.mp3
    │   │   │   └── 003.mp3
    │   │   └── tr/
    │   │       ├── sentences.json
    │   │       ├── 001.mp3
    │   │       └── 003.mp3
    ├── tr/
    └── uk/
```

---

## 📁 Объяснение уровней

* `static/` — стандартная папка Flask для статических ресурсов
* `data/` — корень всех доступных данных
* `dictations/` — корень всех диктантов
* `dicta_001/` — корень кренкретного диктанта (имя = dikta_<вермя создани>)
* `en/`, `tr/`, `uk/` — папки по языкам  диктанта


---

## 📁 Структура папки одного диктанта (`text_001/`)

```
├── dicta_001/
│   ├── sentences.json ← общая информация о диктанте
│   ├── en/
│   │   ├── sentences.json ← список предложений
│   │   ├── 001.mp3
│   │   ├── 002.mp3
│   │   └── 003.mp3
│   ├── ru/
│   │   ├── sentences.json
│   │   ├── 001.mp3
│   │   ├── 002.mp3
│   │   └── 003.mp3
│   └── tr/
│       ├── sentences.json
│       ├── 001.mp3
│       ├── 002.mp3
│       └── 003.mp3
```
---

## 📄 Структура JSON-файлов

### 📘 `categories.json`

Используется для построения дерева FancyTree в модальном окне выбора категории. Узел верхнего уровня это пара `language_original=>language_translation` — язык оригинала (например, `en=>uk`, `en=>tr`, `uk=>en`)


#### 🔹 Формат:

```json
[
  {
    "key": "123456",
    "title": "Книга 1",
    "language_original": "en",
    "language_translation": "ru",
    "dictations": ["dictation_ID_1",  "dictation_ID_2",  "dictation_ID_3"],
    "expanded": true,
    "folder": true,
    "children": [
      {
        "key": "123457",
        "title": "book1_chapter1",
        "language_original": "en",
        "language_translation": "ru",
        "dictations": ["dictation_ID_1",  "dictation_ID_2",  "dictation_ID_3"],
        "expanded": true,
        "folder": true
      }
    ]
  }
]
```

#### 🔹 Поля:

* `key` — уникальный ключ (используется для логики)
* `title` — отображаемое имя узла
* `language_original` — язык оригинал диктантк (нетив озвучил и написал текст)
* `language_translatione` — язык перевода. Задается только для первого уровня на все нижние уровни копируется у родителя при создании ветки. Эти два параметра обязательны при отображении дерева "en=>ru" можно флагами (картинками флагов)
* `dictations` — ID диктантов, которые есть в папке (один диктант может быть в нескольких папках)
* `children` — подкатегории
* `folder` — если `true`, отображается как папка
* `expanded` — пока не знаю зачем (билиотека его создала)

---

### 📘 `info.json`

Хранит метаинформацию о диктанте и список предложений.

#### 🔹 Пример:

```json
{
  "language_original": "en",
  "language_translation": ["ru","tr"],
  "title": "Lesson 1: First steps",
  "level": "A1"
}
```

#### 🔹 Поля:

* `language_original` — язык оригинала (например, `en`, `tr`, `uk`)
* `language_translation` — тут может быть несколько языков (от этого значение зависит сколько будет папок с языками в папке диктанта)
* `title` — заголовок диктанта
* `level` — уровень сложности (A1, B2...) просто информация для пользователя


---

### 📘 `sentences.json`

Хранит метаинформацию о списоке предложений на конкретном языке (язык название папки)

#### 🔹 Пример:

```json
{
    "language": "en",
    "speaker": "autotranslation",
    "sentences": [
      {
        "key": "123457",
        "title": "Lesson 1: First steps",
        "audio": "004.mp3"
      }
    ]
}
```

#### 🔹 Поля:

* `language` — информация о языке дикткнта в данном файле (возможно будет поле "speaker") 
* `autotranslation` — информация дикторе 
* `key` — уникальный ключ (используется для логики) 
* `title` — заголовок диктанта
* `аудио` — название .mp3 в общей с текущим файлом папке

---

## 🎯 Правила организации

1. Название папки — название языка `en/`, `uk/`, `tr/`, `ru/`.
2. Файлы аудио называются по шаблону: `YYY.mp3`, где `YYY` — уникальный номер предложения

   * `003.mp3`, `003.mp3`
3. Все данные и медиа одного диктанта, языка и диктора — в **одной папке**.
4. `sentences.json` должен обязательно быть внутри этой папки.
5. Переводы хранятся как в папке с коротким названием языка `en/`, `ru/`
6. **Каждое предложение в `sentences.json` должно иметь `key`** — это нужно для надёжного связывания оригинала и перевода.
7. Если язык добавлен позже — нужно добавить его в `info.json`, и создать папку с его названием своим `sentences.json` и набором аудио для каждого предложения.

---


## 🧠 Вопросы на будущее

* При удалении предложения — **не удалять key!** Лучше пометить как "deleted": `"text": null` или оставить пустым.


---

📌 При любых изменениях структуры — **обновить этот файл!**
