(function(g){var window=this;'use strict';var kn=function(L){L.publish("autonavvisibility")},HX_=function(L,m){g.Pv(L,"onAutonavCoundownStarted",m)},YCr=function(L,m){m=m.getWatchNextResponse()?.playerOverlays?.playerOverlayRenderer?.autoplay?.playerOverlayAutoplayRenderer?.nextButton?.buttonRenderer;
L.Wv=m?.navigationEndpoint;m=m?.trackingParams;L.playButton&&m&&L.K.setTrackingParams(L.playButton.element,m)},Wc=function(L){const m=Hc(L);
var n=Math,C=n.min;var Z=L.T?Date.now()-L.T:0;n=C.call(n,Z,m);Yn(L,Math.ceil((m-n)/1E3));m-n<=500&&L.W()?L.select(!0):L.W()&&L.C.start()},GX=function(L){var m=L.K.Xy(!0,L.K.isFullscreen());
g.gy(L.container.element,"ytp-autonav-endscreen-small-mode",L.Vf(m));g.gy(L.container.element,"ytp-autonav-endscreen-is-premium",!!L.suggestion&&!!L.suggestion.p_);g.gy(L.K.getRootNode(),"ytp-autonav-endscreen-cancelled-state",!L.K.s6());g.gy(L.K.getRootNode(),"countdown-running",L.W());g.gy(L.container.element,"ytp-player-content",L.K.s6());g.xq(L.overlay.element,{width:`${m.width}px`});if(!L.W()){L.K.s6()?Yn(L,Math.round(Hc(L)/1E3)):Yn(L);m=!!L.suggestion&&!!L.suggestion.i_;const n=L.K.s6()||!m;
g.gy(L.container.element,"ytp-autonav-endscreen-upnext-alternative-header-only",!n&&m);g.gy(L.container.element,"ytp-autonav-endscreen-upnext-no-alternative-header",n&&!m);L.S.EK(L.K.s6());g.gy(L.element,"ytp-enable-w2w-color-transitions",!!L.K.getVideoData()?.watchToWatchTransitionRenderer)}},Yn=function(L,m=-1){L=L.L.aj("ytp-autonav-endscreen-upnext-header");
g.M4(L);if(m>=0){m=String(m);const n="\u0412\u0438\u0434\u0435\u043e \u043d\u0430\u0447\u043d\u0435\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437 $SECONDS".match(RegExp("\\$SECONDS","gi"))[0],C="\u0412\u0438\u0434\u0435\u043e \u043d\u0430\u0447\u043d\u0435\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437 $SECONDS".indexOf(n);if(C>=0){L.appendChild(g.ey("\u0412\u0438\u0434\u0435\u043e \u043d\u0430\u0447\u043d\u0435\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437 $SECONDS".slice(0,C)));const Z=
g.wr("span");g.DC(Z,"ytp-autonav-endscreen-upnext-header-countdown-number");g.bF(Z,m);L.appendChild(Z);L.appendChild(g.ey("\u0412\u0438\u0434\u0435\u043e \u043d\u0430\u0447\u043d\u0435\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437 $SECONDS".slice(C+n.length)));return}}g.bF(L,"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435")},Hc=function(L){return L.K.isFullscreen()?(L=L.K.getVideoData()?.Ic,L===-1||L===void 0?8E3:L):L.K.MF()>=0?L.K.MF():g.JE(L.K.D().experiments,"autoplay_time")||1E4},dv=
function(L,m){m=Wwo(L,m);
var n=Math,C=n.min;var Z=(0,g.h)()-L.T;n=C.call(n,Z,m);m=m===0?1:Math.min(n/m,1);L.KI.setAttribute("stroke-dashoffset",`${-211*(m+1)}`);m>=1&&L.W()&&L.api.getPresentingPlayerType()!==3?L.select(!0):L.W()&&L.L.start()},Wwo=function(L,m){return m?m:L.api.isFullscreen()?(L=L.api.getVideoData()?.Ic,L===-1||L===void 0?8E3:L):L.api.MF()>=0?L.api.MF():g.JE(L.api.D().experiments,"autoplay_time")||1E4},KY=function(L){const m=L.s6();
m!==L.T&&(L.T=m,kn(L.player),L.T?(L.O!==L.W&&L.O.hide(),L.table.hide()):(L.O!==L.W&&L.O.show(),L.table.show()))},xn=function(L){return g.n4(L.player)&&L.L()&&!L.U},yN=function(L){const m=L.s6();
m!==L.C&&(L.C=m,kn(L.player))},jM=function(L){return g.n4(L.player)&&L.L()&&!L.S},oq=function(L){const m=L.s6();
m!==L.Je&&(L.Je=m,kn(L.player))},GfZ=function(L){L=L.D();
return L.gx&&!L.I6&&!L.disableOrganicUi},dep=function(L){const m=L.player.getVideoData();
if(!m||L.W===m.cS&&L.O===m.Xe)return!1;L.W=m.cS;L.O=m.Xe;return!0},Kwr=function(L){L.player.lL("endscreen");
var m=L.player.getVideoData();m=new g.Vd(Math.max((m.lengthSeconds-10)*1E3,0),0x8000000000000,{id:"preload",namespace:"endscreen"});const n=new g.Vd(0x8000000000000,0x8000000000000,{id:"load",priority:8,namespace:"endscreen"});L.player.v0([m,n])};
g.nh.prototype.MF=g.nJ(6,function(){return this.app.MF()});
g.hG.prototype.MF=g.nJ(5,function(){return this.getVideoData().Ls});
g.m4.prototype.oe=g.nJ(4,function(L){this.PS().oe(L)});
g.l$.prototype.oe=g.nJ(3,function(L){this.Oi!==L&&(this.Oi=L,this.iU())});
var xeH=class extends g.y{constructor(L){const m=L.D(),n=m.G;super({Z:"a",B:"ytp-autonav-suggestion-card",Y:{href:"{{url}}",target:n?m.j:"","aria-label":"{{aria_label}}","data-is-live":"{{is_live}}","data-is-list":"{{is_list}}","data-is-mix":"{{is_mix}}","data-is-upcoming":"{{is_upcoming}}"},V:[{Z:"div",rd:["ytp-autonav-endscreen-upnext-thumbnail","ytp-autonav-thumbnail-small"],Y:{style:"{{background}}"},V:[{Z:"div",Y:{"aria-label":"{{timestamp}}"},rd:["ytp-autonav-timestamp"],Go:"{{duration}}"},
{Z:"div",rd:["ytp-autonav-live-stamp"],Go:"\u0412 \u044d\u0444\u0438\u0440\u0435"},{Z:"div",rd:["ytp-autonav-upcoming-stamp"],Go:"\u0421\u043a\u043e\u0440\u043e \u0432 \u044d\u0444\u0438\u0440\u0435"},{Z:"div",B:"ytp-autonav-list-overlay",V:[{Z:"div",B:"ytp-autonav-mix-text",Go:"\u041c\u0438\u043a\u0441"},{Z:"div",B:"ytp-autonav-mix-icon"}]}]},{Z:"div",rd:["ytp-autonav-endscreen-upnext-title","ytp-autonav-title-card"],Go:"{{title}}"},{Z:"div",rd:["ytp-autonav-endscreen-upnext-author","ytp-autonav-author-card"],
Go:"{{author}}"},{Z:"div",rd:["ytp-autonav-endscreen-upnext-author","ytp-autonav-view-and-date-card"],Go:"{{views_and_publish_time}}"}]});this.K=L;this.suggestion=null;this.W=n;this.listen("click",this.onClick);this.listen("keypress",this.onKeyPress)}select(){this.K.sV(this.suggestion.videoId,this.suggestion.sessionData,this.suggestion.playlistId,void 0,void 0,this.suggestion.ym||void 0)&&this.K.logClick(this.element)}onClick(L){g.qM(L,this.K,this.W,this.suggestion.sessionData||void 0)&&this.select()}onKeyPress(L){switch(L.keyCode){case 13:case 32:L.defaultPrevented||
(this.select(),L.preventDefault())}}};var cc=class extends g.y{constructor(L,m=!1){super({Z:"div",B:"ytp-autonav-endscreen-countdown-overlay"});this.Zl=m;this.cancelCommand=this.Wv=void 0;this.T=0;this.container=new g.y({Z:"div",B:"ytp-autonav-endscreen-countdown-container"});g.J(this,this.container);this.container.sN(this.element);m=L.D();const n=m.G;this.K=L;this.suggestion=null;this.onVideoDataChange("newdata",this.K.getVideoData());this.A(L,"videodatachange",this.onVideoDataChange);this.L=new g.y({Z:"div",B:"ytp-autonav-endscreen-upnext-container",
Y:{"aria-label":"{{aria_label}}","data-is-live":"{{is_live}}","data-is-list":"{{is_list}}","data-is-mix":"{{is_mix}}","data-is-upcoming":"{{is_upcoming}}"},V:[{Z:"div",B:"ytp-autonav-endscreen-upnext-header"},{Z:"div",B:"ytp-autonav-endscreen-upnext-alternative-header",Go:"{{autoplayAlternativeHeader}}"},{Z:"a",B:"ytp-autonav-endscreen-link-container",Y:{href:"{{url}}",target:n?m.j:""},V:[{Z:"div",B:"ytp-autonav-endscreen-upnext-thumbnail",Y:{style:"{{background}}"},V:[{Z:"div",Y:{"aria-label":"{{timestamp}}"},
rd:["ytp-autonav-timestamp"],Go:"{{duration}}"},{Z:"div",rd:["ytp-autonav-live-stamp"],Go:"\u0412 \u044d\u0444\u0438\u0440\u0435"},{Z:"div",rd:["ytp-autonav-upcoming-stamp"],Go:"\u0421\u043a\u043e\u0440\u043e \u0432 \u044d\u0444\u0438\u0440\u0435"}]},{Z:"div",B:"ytp-autonav-endscreen-video-info",V:[{Z:"div",B:"ytp-autonav-endscreen-premium-badge"},{Z:"div",B:"ytp-autonav-endscreen-upnext-title",Go:"{{title}}"},{Z:"div",B:"ytp-autonav-endscreen-upnext-author",Go:"{{author}}"},{Z:"div",B:"ytp-autonav-view-and-date",
Go:"{{views_and_publish_time}}"},{Z:"div",B:"ytp-autonav-author-and-view",Go:"{{author_and_views}}"}]}]}]});g.J(this,this.L);this.L.sN(this.container.element);n||this.A(this.L.aj("ytp-autonav-endscreen-link-container"),"click",this.zo);this.K.createClientVe(this.container.element,this,115127);this.K.createClientVe(this.L.aj("ytp-autonav-endscreen-link-container"),this,115128);this.overlay=new g.y({Z:"div",B:"ytp-autonav-overlay"});g.J(this,this.overlay);this.overlay.sN(this.container.element);this.S=
new g.y({Z:"div",B:"ytp-autonav-endscreen-button-container"});g.J(this,this.S);this.S.sN(this.container.element);this.cancelButton=new g.y({Z:"button",rd:["ytp-autonav-endscreen-upnext-button","ytp-autonav-endscreen-upnext-cancel-button",m.N("web_modern_buttons")?"ytp-autonav-endscreen-upnext-button-rounded":""],Y:{"aria-label":"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0430\u0432\u0442\u043e\u0432\u043e\u0441\u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435\u043d\u0438\u0435"},Go:"\u041e\u0442\u043c\u0435\u043d\u0430"});
g.J(this,this.cancelButton);this.cancelButton.sN(this.S.element);this.cancelButton.listen("click",this.KI,this);this.K.createClientVe(this.cancelButton.element,this,115129);this.playButton=new g.y({Z:"a",rd:["ytp-autonav-endscreen-upnext-button","ytp-autonav-endscreen-upnext-play-button",m.N("web_modern_buttons")?"ytp-autonav-endscreen-upnext-button-rounded":""],Y:{href:"{{url}}",role:"button","aria-label":"\u0412\u043e\u0441\u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0441\u0442\u0438 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435 \u0432\u0438\u0434\u0435\u043e"},
Go:"\u0412\u043e\u0441\u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0441\u0442\u0438"});g.J(this,this.playButton);this.playButton.sN(this.S.element);this.playButton.listen("click",this.zo,this);this.K.createServerVe(this.playButton.element,this.playButton,!0);(m=this.K.getVideoData())&&YCr(this,m);this.C=new g.ni(()=>{Wc(this)},500);
g.J(this,this.C);this.Je();this.A(L,"autonavvisibility",this.Je);this.K.N("web_autonav_color_transition")&&(this.A(L,"autonavchange",this.nI),this.A(L,"onAutonavCoundownStarted",this.xU))}j(L){this.suggestion!==L&&(this.suggestion=L,g.MR(this.L,L),this.playButton.updateValue("url",this.suggestion.lS()),GX(this))}W(){return this.T>0}U(){this.W()||(this.T=Date.now(),Wc(this),HX_(this.K,Hc(this)),g.gy(this.K.getRootNode(),"countdown-running",this.W()))}G(){this.O();Wc(this);const L=this.L.aj("ytp-autonav-endscreen-upnext-header");
L&&g.bF(L,"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435")}O(){this.W()&&(this.C.stop(),this.T=0)}select(L=!1){this.K.nextVideo(!1,L);this.O()}zo(L){g.qM(L,this.K)&&(L.currentTarget===this.playButton.element?this.K.logClick(this.playButton.element):L.currentTarget===this.L.aj("ytp-autonav-endscreen-link-container")&&(L=this.L.aj("ytp-autonav-endscreen-link-container"),this.K.logVisibility(L,!0),this.K.logClick(L)),this.Wv?(g.Pv(this.K,"innertubeCommand",this.Wv),this.O()):this.select())}KI(){this.K.logClick(this.cancelButton.element);
g.Kn(this.K,!0);this.cancelCommand&&g.Pv(this.K,"innertubeCommand",this.cancelCommand)}onVideoDataChange(L,m){YCr(this,m);this.cancelCommand=m.getWatchNextResponse()?.playerOverlays?.playerOverlayRenderer?.autoplay?.playerOverlayAutoplayRenderer?.cancelButton?.buttonRenderer?.command}xU(L){if(this.K.getVideoData()?.watchToWatchTransitionRenderer){var m=this.K.getVideoData().watchToWatchTransitionRenderer;const n=m?.fromColorPaletteDark,C=m?.toColorPaletteDark;n&&C&&(m=this.element,m.style.setProperty("--w2w-start-background-color",
g.Rt(n.surgeColor)),m.style.setProperty("--w2w-start-primary-text-color",g.Rt(n.primaryTitleColor)),m.style.setProperty("--w2w-start-secondary-text-color",g.Rt(n.secondaryTitleColor)),m.style.setProperty("--w2w-end-background-color",g.Rt(C.surgeColor)),m.style.setProperty("--w2w-end-primary-text-color",g.Rt(C.primaryTitleColor)),m.style.setProperty("--w2w-end-secondary-text-color",g.Rt(C.secondaryTitleColor)),m.style.setProperty("--w2w-animation-duration",`${L}ms`));g.gy(this.element,"ytp-w2w-animate",
!0)}}nI(L){this.K.N("web_autonav_color_transition")&&L!==2&&g.gy(this.element,"ytp-w2w-animate",!1)}Je(){const L=this.K.s6();this.Zl&&this.Lu!==L&&this.EK(L);GX(this);this.K.logVisibility(this.container.element,L);this.K.logVisibility(this.cancelButton.element,L);this.K.logVisibility(this.L.aj("ytp-autonav-endscreen-link-container"),L);this.K.logVisibility(this.playButton.element,L)}Vf(L){return L.width<400||L.height<459}};var Lo=class extends g.y{constructor(L,m){super({Z:"div",rd:["html5-endscreen","ytp-player-content",m||"base-endscreen"]});this.created=!1;this.player=L}create(){this.created=!0}destroy(){this.created=!1}L(){return!1}s6(){return!1}Wv(){return!1}};var mm=class extends g.y{constructor(L){super({Z:"div",rd:["ytp-upnext","ytp-player-content"],Y:{"aria-label":"{{aria_label}}"},V:[{Z:"div",B:"ytp-cued-thumbnail-overlay-image",Y:{style:"{{background}}"}},{Z:"span",B:"ytp-upnext-top",V:[{Z:"span",B:"ytp-upnext-header",Go:"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435"},{Z:"span",B:"ytp-upnext-title",Go:"{{title}}"},{Z:"span",B:"ytp-upnext-author",Go:"{{author}}"}]},{Z:"a",B:"ytp-upnext-autoplay-icon",Y:{role:"button",href:"{{url}}","aria-label":"\u0412\u043e\u0441\u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0441\u0442\u0438 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435 \u0432\u0438\u0434\u0435\u043e"},
V:[{Z:"svg",Y:{height:"100%",version:"1.1",viewBox:"0 0 72 72",width:"100%"},V:[{Z:"circle",B:"ytp-svg-autoplay-circle",Y:{cx:"36",cy:"36",fill:"#fff","fill-opacity":"0.3",r:"31.5"}},{Z:"circle",B:"ytp-svg-autoplay-ring",Y:{cx:"-36",cy:"36","fill-opacity":"0",r:"33.5",stroke:"#FFFFFF","stroke-dasharray":"211","stroke-dashoffset":"-211","stroke-width":"4",transform:"rotate(-90)"}},{Z:"path",B:"ytp-svg-fill",Y:{d:"M 24,48 41,36 24,24 V 48 z M 44,24 v 24 h 4 V 24 h -4 z"}}]}]},{Z:"span",B:"ytp-upnext-bottom",
V:[{Z:"span",B:"ytp-upnext-cancel"},{Z:"span",B:"ytp-upnext-paused",Go:"\u0410\u0432\u0442\u043e\u0432\u043e\u0441\u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u043f\u0440\u0438\u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043e."}]}]});this.api=L;this.cancelButton=null;this.KI=this.aj("ytp-svg-autoplay-ring");this.C=this.notification=this.L=this.suggestion=null;this.Wv=new g.ni(this.S,5E3,this);this.T=0;var m=this.aj("ytp-upnext-cancel");this.cancelButton=
new g.y({Z:"button",rd:["ytp-upnext-cancel-button","ytp-button"],Y:{tabindex:"0","aria-label":"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0430\u0432\u0442\u043e\u0432\u043e\u0441\u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435\u043d\u0438\u0435"},Go:"\u041e\u0442\u043c\u0435\u043d\u0430"});g.J(this,this.cancelButton);this.cancelButton.listen("click",this.zo,this);this.cancelButton.sN(m);this.cancelButton&&this.api.createClientVe(this.cancelButton.element,this,115129);g.J(this,this.Wv);
this.api.createClientVe(this.element,this,18788);m=this.aj("ytp-upnext-autoplay-icon");this.A(m,"click",this.nI);this.api.createClientVe(m,this,115130);this.Je();this.A(L,"autonavvisibility",this.Je);this.A(L,"mdxnowautoplaying",this.xU);this.A(L,"mdxautoplaycanceled",this.Zl);g.gy(this.element,"ytp-upnext-mobile",this.api.D().O)}S(){this.notification&&(this.Wv.stop(),this.TX(this.C),this.C=null,this.notification.close(),this.notification=null)}j(L){this.suggestion=L;g.MR(this,L,"hqdefault.jpg")}Je(){this.EK(this.api.s6());
this.api.logVisibility(this.element,this.api.s6());this.api.logVisibility(this.aj("ytp-upnext-autoplay-icon"),this.api.s6());this.cancelButton&&this.api.logVisibility(this.cancelButton.element,this.api.s6())}m3(){window.focus();this.S()}U(L){this.W()||(g.F9("a11y-announce",`${"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435"} ${this.suggestion.title}`),this.T=(0,g.h)(),this.L=new g.ni(()=>{dv(this,L)},25),dv(this,L),HX_(this.api,Wwo(this,L)));
g.wy(this.element,"ytp-upnext-autoplay-paused")}hide(){super.hide()}W(){return!!this.L}G(){this.O();this.T=(0,g.h)();dv(this);g.lV(this.element,"ytp-upnext-autoplay-paused")}O(){this.W()&&(this.L.dispose(),this.L=null)}select(L=!1){if(this.api.D().N("autonav_notifications")&&L&&window.Notification&&typeof document.hasFocus==="function"){const m=Notification.permission;m==="default"?Notification.requestPermission():m!=="granted"||document.hasFocus()||(this.S(),this.notification=new Notification("\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435",
{body:this.suggestion.title,icon:this.suggestion.So()}),this.C=this.A(this.notification,"click",this.m3),this.Wv.start())}this.O();this.api.nextVideo(!1,L)}nI(L){!g.JV(this.cancelButton.element,L.target)&&g.qM(L,this.api)&&(this.api.s6()&&this.api.logClick(this.aj("ytp-upnext-autoplay-icon")),this.select())}zo(){this.api.s6()&&this.cancelButton&&this.api.logClick(this.cancelButton.element);g.Kn(this.api,!0)}xU(L){this.api.getPresentingPlayerType();this.show();this.U(L)}Zl(){this.api.getPresentingPlayerType();
this.O();this.hide()}b1(){this.O();this.S();super.b1()}};var jWD=class extends Lo{constructor(L){super(L,"autonav-endscreen");this.overlay=this.videoData=null;this.table=new g.y({Z:"div",B:"ytp-suggestion-panel",V:[{Z:"div",rd:["ytp-autonav-endscreen-upnext-header","ytp-autonav-endscreen-more-videos"],Go:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0434\u0440\u0443\u0433\u0438\u0435 \u0432\u0438\u0434\u0435\u043e"}]});this.C=new g.y({Z:"div",B:"ytp-suggestions-container"});this.videos=[];this.G=null;this.T=this.j=!1;this.O=new cc(this.player);g.J(this,
this.O);this.O.sN(this.element);L.getVideoData().Xe?this.W=this.O:(this.W=new mm(L),g.mG(this.player,this.W.element,4),g.J(this,this.W));this.overlay=new g.y({Z:"div",B:"ytp-autonav-overlay-cancelled-state"});g.J(this,this.overlay);this.overlay.sN(this.element);this.U=new g.X7(this);g.J(this,this.U);g.J(this,this.table);this.table.sN(this.element);this.table.show();g.J(this,this.C);this.C.sN(this.table.element);this.hide()}create(){super.create();this.U.A(this.player,"appresize",this.S);this.U.A(this.player,
"onVideoAreaChange",this.S);this.U.A(this.player,"videodatachange",this.onVideoDataChange);this.U.A(this.player,"autonavchange",this.Je);this.U.A(this.player,"onAutonavCancelled",this.zo);this.onVideoDataChange()}show(){super.show();(this.j||this.G&&this.G!==this.videoData.clientPlaybackNonce)&&g.Kn(this.player,!1);g.n4(this.player)&&this.L()&&!this.G?(KY(this),this.videoData.autonavState===2?this.player.getVisibilityState()===3?this.W.select(!0):this.W.U():this.videoData.autonavState===3&&this.W.G()):
(g.Kn(this.player,!0),KY(this));this.S()}hide(){super.hide();this.W.G();KY(this)}S(){var L=this.player.Xy(!0,this.player.isFullscreen());KY(this);GX(this.O);g.gy(this.element,"ytp-autonav-cancelled-small-mode",this.Vf(L));g.gy(this.element,"ytp-autonav-cancelled-tiny-mode",this.zB(L));g.gy(this.element,"ytp-autonav-cancelled-mini-mode",L.width<=400||L.height<=360);this.overlay&&g.xq(this.overlay.element,{width:`${L.width}px`});if(!this.T)for(L=0;L<this.videos.length;L++)g.gy(this.videos[L].element,
"ytp-suggestion-card-with-margin",L%2===1)}onVideoDataChange(){var L=this.player.getVideoData();if(this.videoData!==L&&L){this.videoData=L;if((L=this.videoData.suggestions)&&L.length||this.player.N("web_player_autonav_empty_suggestions_fix")){var m=this.videoData.C();m&&(this.W.j(m),this.W!==this.O&&this.O.j(m))}if(L&&L.length)for(let C=0;C<yuJ.length;++C){var n=yuJ[C];L&&L[n]&&(this.videos[C]=new xeH(this.player),m=this.videos[C],n=L[n],m.suggestion!==n&&(m.suggestion=n,g.MR(m,n)),g.J(this,this.videos[C]),
this.videos[C].sN(this.C.element))}this.S()}}Je(L){L===1?(this.j=!1,this.G=this.videoData.clientPlaybackNonce,this.W.O(),this.Lu&&this.S()):(this.j=!0,this.s6()&&(L===2?this.W.U():L===3&&this.W.G()))}zo(L){L?this.Je(1):(this.G=null,this.j=!1)}L(){return this.videoData.autonavState!==1}Vf(L){return(L.width<910||L.height<459)&&!this.zB(L)&&!(L.width<=400||L.height<=360)}zB(L){return L.width<800&&!(L.width<=400||L.height<=360)}s6(){return this.Lu&&g.n4(this.player)&&this.L()&&!this.G}},yuJ=[1,3,2,4];var oTw=class extends Lo{constructor(L){super(L,"videowall-endscreen");this.K=L;this.stills=[];this.U=this.videoData=null;this.S=this.C=!1;this.Je=null;g.lV(this.element,"modern-videowall-endscreen");this.O=new g.X7(this);g.J(this,this.O);this.T=new g.ni(()=>{g.lV(this.element,"ytp-show-tiles")},0);
g.J(this,this.T);this.table=new g.Sg({Z:"div",B:"ytp-modern-endscreen-content"});g.J(this,this.table);this.table.sN(this.element);L.getVideoData().Xe?this.W=new cc(L,!0):this.W=new mm(L);g.J(this,this.W);g.mG(this.player,this.W.element,4);L.createClientVe(this.element,this,158789);this.hide()}create(){super.create();var L=this.player.getVideoData();L&&(this.videoData=L);this.G();this.O.A(this.player,"appresize",this.G);this.O.A(this.player,"onVideoAreaChange",this.G);this.O.A(this.player,"videodatachange",
this.onVideoDataChange);this.O.A(this.player,"autonavchange",this.j);this.O.A(this.player,"onAutonavCancelled",this.zo);L=this.videoData.autonavState;L!==this.Je&&this.j(L);this.O.A(this.element,"transitionend",this.nI)}destroy(){g.AM(this.O);g.MT(this.stills);this.stills=[];super.destroy();g.wy(this.element,"ytp-show-tiles");this.T.stop();this.Je=this.videoData.autonavState}L(){return this.videoData.autonavState!==1}show(){const L=this.Lu;super.show();g.wy(this.element,"ytp-show-tiles");this.player.D().O?
g.Ci(this.T):this.T.start();(this.S||this.U&&this.U!==this.videoData.clientPlaybackNonce)&&g.Kn(this.player,!1);xn(this)?(yN(this),this.videoData.autonavState===2?this.player.getVisibilityState()===3?this.W.select(!0):this.W.U():this.videoData.autonavState===3&&this.W.G()):(g.Kn(this.player,!0),yN(this));L!==this.Lu&&this.player.logVisibility(this.element,!0)}hide(){const L=this.Lu;super.hide();this.W.G();yN(this);L!==this.Lu&&this.player.logVisibility(this.element,!1)}nI(L){L.target===this.element&&
this.G()}G(){const L=this.videoData?.suggestions?.length?this.videoData?.suggestions:[this.videoData?.C()];if(L.length){var m=this.K.Xy(!0,this.K.isFullscreen()),n=Math.floor((m.width-64+16)/(g.pu(m.width*.27,250,450)+16));m=Math.min(3,Math.floor((m.height-64)/((m.width-64-(n-1)*16)/n*.5625+70)));g.eN(this.element,["ytp-modern-endscreen-limit-rows-1","ytp-modern-endscreen-limit-rows-2","ytp-modern-endscreen-limit-rows-3"]);g.lV(this.element,`ytp-modern-endscreen-limit-rows-${m}`);g.gy(this.element,
"ytp-modern-endscreen-single-item",n===1);g.gy(this.element,"ytp-modern-endscreen-row-0",m===0);n=this.table.element;n.ariaLive="polite";this.W.j(this.videoData.C());this.W instanceof cc&&GX(this.W);g.gy(this.element,"ytp-endscreen-takeover",xn(this));yN(this);m=0;n.ariaBusy="true";var C=L.length;for(let Z=0;Z<C;Z++){const z=Z%C;let v=this.stills[Z];v||(v=new g.aNm(this.player),this.stills[Z]=v,n.appendChild(v.element));g.krm(v,L[z]);m++}this.stills.length=m}}onVideoDataChange(){const L=this.player.getVideoData(1);
this.videoData!==L&&(L?.C()?(this.videoData=L,this.G()):this.player.kU("missg",{vid:L?.videoId||"",cpn:L?.clientPlaybackNonce||""}))}Wv(){return this.W.W()}j(L){L===1?(this.S=!1,this.U=this.videoData.clientPlaybackNonce,this.W.O(),this.Lu&&this.G()):(this.S=!0,this.Lu&&xn(this)&&(L===2?this.W.U():L===3&&this.W.G()))}zo(L){if(L){for(L=0;L<this.stills.length;L++)this.K.logVisibility(this.stills[L].element,!0);this.j(1)}else this.U=null,this.S=!1;this.G()}s6(){return this.Lu&&xn(this)}};var cup=class extends Lo{constructor(L){super(L,"subscribecard-endscreen");this.W=new g.y({Z:"div",B:"ytp-subscribe-card",V:[{Z:"img",B:"ytp-author-image",Y:{src:"{{profilePicture}}"}},{Z:"div",B:"ytp-subscribe-card-right",V:[{Z:"div",B:"ytp-author-name",Go:"{{author}}"},{Z:"div",B:"html5-subscribe-button-container"}]}]});g.J(this,this.W);this.W.sN(this.element);const m=L.getVideoData();this.subscribeButton=new g.qz("\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f",null,"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u043e\u0434\u043f\u0438\u0441\u043a\u0443",
null,!0,!1,m.Ms,m.subscribed,"trailer-endscreen",null,L,!1);g.J(this,this.subscribeButton);this.subscribeButton.sN(this.W.aj("html5-subscribe-button-container"));this.A(L,"videodatachange",this.Ae);this.Ae();this.hide()}Ae(){const L=this.player.getVideoData();this.W.update({profilePicture:L.profilePicture,author:L.author});this.subscribeButton.channelId=L.Ms;var m=this.subscribeButton;L.subscribed?m.W():m.O()}};var Lfp=class extends g.y{constructor(L){const m=L.D(),n=g.$e||g.jk?{style:"will-change: opacity"}:void 0,C=m.G,Z=["ytp-videowall-still"];m.O&&Z.push("ytp-videowall-show-text");super({Z:"a",rd:Z,Y:{href:"{{url}}",target:C?m.j:"","aria-label":"{{aria_label}}","data-is-live":"{{is_live}}","data-is-list":"{{is_list}}","data-is-mix":"{{is_mix}}"},V:[{Z:"div",B:"ytp-videowall-still-image",Y:{style:"{{background}}"}},{Z:"span",B:"ytp-videowall-still-info",Y:{"aria-hidden":"true"},V:[{Z:"span",B:"ytp-videowall-still-info-bg",
V:[{Z:"span",B:"ytp-videowall-still-info-content",Y:n,V:[{Z:"span",B:"ytp-videowall-still-info-title",Go:"{{title}}"},{Z:"span",B:"ytp-videowall-still-info-author",Go:"{{author_and_views}}"},{Z:"span",B:"ytp-videowall-still-info-live",Go:"\u0412 \u044d\u0444\u0438\u0440\u0435"},{Z:"span",B:"ytp-videowall-still-info-duration",Go:"{{duration}}"}]}]}]},{Z:"span",rd:["ytp-videowall-still-listlabel-regular","ytp-videowall-still-listlabel"],Y:{"aria-hidden":"true"},V:[{Z:"span",B:"ytp-videowall-still-listlabel-icon"},
"\u041f\u043b\u0435\u0439\u043b\u0438\u0441\u0442",{Z:"span",B:"ytp-videowall-still-listlabel-length",V:[" (",{Z:"span",Go:"{{playlist_length}}"},")"]}]},{Z:"span",rd:["ytp-videowall-still-listlabel-mix","ytp-videowall-still-listlabel"],Y:{"aria-hidden":"true"},V:[{Z:"span",B:"ytp-videowall-still-listlabel-mix-icon"},"\u041c\u0438\u043a\u0441",{Z:"span",B:"ytp-videowall-still-listlabel-length",Go:" (50+)"}]}]});this.suggestion=null;this.O=C;this.api=L;this.W=new g.X7(this);g.J(this,this.W);this.listen("click",
this.onClick);this.listen("keypress",this.onKeyPress);this.W.A(L,"videodatachange",this.onVideoDataChange);L.createServerVe(this.element,this);this.onVideoDataChange()}select(){this.api.sV(this.suggestion.videoId,this.suggestion.sessionData,this.suggestion.playlistId,void 0,void 0,this.suggestion.ym||void 0)&&this.api.logClick(this.element)}onClick(L){if(g.Bo(this.api.D())&&this.api.N("web_player_log_click_before_generating_ve_conversion_params")){this.api.logClick(this.element);let m=this.suggestion.lS();
const n={};g.oI(this.api,n);m=g.Fk(m,n);g.Dg(m,this.api,L)}else g.qM(L,this.api,this.O,this.suggestion.sessionData||void 0)&&this.select()}onKeyPress(L){switch(L.keyCode){case 13:case 32:L.defaultPrevented||(this.select(),L.preventDefault())}}onVideoDataChange(){const L=this.api.getVideoData(),m=this.api.D();this.O=L.W0?!1:m.G}};var mio=class extends Lo{constructor(L){super(L,"videowall-endscreen");this.K=L;this.U=0;this.stills=[];this.S=this.videoData=null;this.T=this.Je=!1;this.zo=null;this.G=new g.X7(this);g.J(this,this.G);this.j=new g.ni(()=>{g.lV(this.element,"ytp-show-tiles")},0);
g.J(this,this.j);var m=new g.y({Z:"button",rd:["ytp-button","ytp-endscreen-previous"],Y:{"aria-label":"\u041d\u0430\u0437\u0430\u0434"},V:[g.FZ()]});g.J(this,m);m.sN(this.element);m.listen("click",this.xU,this);this.table=new g.Sg({Z:"div",B:"ytp-endscreen-content"});g.J(this,this.table);this.table.sN(this.element);m=new g.y({Z:"button",rd:["ytp-button","ytp-endscreen-next"],Y:{"aria-label":"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435"},V:[g.uT()]});g.J(this,m);m.sN(this.element);m.listen("click",
this.KI,this);L.getVideoData().Xe?this.W=new cc(L,!0):this.W=new mm(L);g.J(this,this.W);g.mG(this.player,this.W.element,4);L.createClientVe(this.element,this,158789);this.hide()}create(){super.create();var L=this.player.getVideoData();L&&(this.videoData=L);this.O();this.G.A(this.player,"appresize",this.O);this.G.A(this.player,"onVideoAreaChange",this.O);this.G.A(this.player,"videodatachange",this.onVideoDataChange);this.G.A(this.player,"autonavchange",this.C);this.G.A(this.player,"onAutonavCancelled",
this.nI);L=this.videoData.autonavState;L!==this.zo&&this.C(L);this.G.A(this.element,"transitionend",this.Zl)}destroy(){g.AM(this.G);g.MT(this.stills);this.stills=[];super.destroy();g.wy(this.element,"ytp-show-tiles");this.j.stop();this.zo=this.videoData.autonavState}L(){return this.videoData.autonavState!==1}show(){const L=this.Lu;super.show();g.wy(this.element,"ytp-show-tiles");this.player.D().O?g.Ci(this.j):this.j.start();(this.T||this.S&&this.S!==this.videoData.clientPlaybackNonce)&&g.Kn(this.player,
!1);jM(this)?(oq(this),this.videoData.autonavState===2?this.player.getVisibilityState()===3?this.W.select(!0):this.W.U():this.videoData.autonavState===3&&this.W.G()):(g.Kn(this.player,!0),oq(this));L!==this.Lu&&this.player.logVisibility(this.element,!0)}hide(){const L=this.Lu;super.hide();this.W.G();oq(this);L!==this.Lu&&this.player.logVisibility(this.element,!1)}Zl(L){L.target===this.element&&this.O()}O(){var L=this.videoData?.suggestions?.length?this.videoData?.suggestions:[this.videoData?.C()];
if(L.length){g.lV(this.element,"ytp-endscreen-paginate");var m=this.K.Xy(!0,this.K.isFullscreen()),n=g.r2(this.K);n&&(n=n.b6()?48:32,m.width-=n*2);var C=m.width/m.height,Z=96/54,z=n=2,v=Math.max(m.width/96,2),E=Math.max(m.height/54,2),X=L.length;var N=X*4;for(N-=4;N>0&&(n<v||z<E);){var T=n/2,V=z/2,a=n<=v-2&&N>=V*4,D=z<=E-2&&N>=T*4;if((T+1)/V*Z/C>C/(T/(V+1)*Z)&&D)N-=T*4,z+=2;else if(a)N-=V*4,n+=2;else if(D)N-=T*4,z+=2;else break}Z=!1;N>=12&&X*4-N<=6&&(z>=4||n>=4)&&(Z=!0);N=n*96;v=z*54;C=N/v<C?m.height/
v:m.width/N;C=Math.min(C,2);N=Math.floor(Math.min(m.width,N*C));v=Math.floor(Math.min(m.height,v*C));m=this.table.element;m.ariaLive="polite";g.iu(m,N,v);g.xq(m,{marginLeft:`${N/-2}px`,marginTop:`${v/-2}px`});this.W.j(this.videoData.C());this.W instanceof cc&&GX(this.W);g.gy(this.element,"ytp-endscreen-takeover",jM(this));oq(this);N+=4;v+=4;C=0;m.ariaBusy="true";for(E=0;E<n;E++)for(T=0;T<z;T++)if(a=C,D=0,Z&&E>=n-2&&T>=z-2?D=1:T%2===0&&E%2===0&&(T<2&&E<2?T===0&&E===0&&(D=2):D=2),a=g.F6(a+this.U,X),
D!==0){V=this.stills[C];V||(V=new Lfp(this.player),this.stills[C]=V,m.appendChild(V.element));var R=Math.floor(v*T/z);const I=Math.floor(N*E/n),t=Math.floor(v*(T+D)/z)-R-4,f=Math.floor(N*(E+D)/n)-I-4;g.n6(V.element,I,R);g.iu(V.element,f,t);g.xq(V.element,"transitionDelay",(T+E)/20+"s");g.gy(V.element,"ytp-videowall-still-mini",D===1);g.gy(V.element,"ytp-videowall-still-large",D>2);D=Math.max(f,t);g.gy(V.element,"ytp-videowall-still-round-large",D>=256);g.gy(V.element,"ytp-videowall-still-round-medium",
D>96&&D<256);g.gy(V.element,"ytp-videowall-still-round-small",D<=96);a=L[a];V.suggestion!==a&&(V.suggestion=a,D=V.api.D(),R=g.Oz(V.element,"ytp-videowall-still-large")?"hqdefault.jpg":"mqdefault.jpg",g.MR(V,a,R),g.Bo(D)&&!V.api.N("web_player_log_click_before_generating_ve_conversion_params")&&(D=a.lS(),R={},g.pn(V.api,"addEmbedsConversionTrackingParams",[R]),D=g.Fk(D,R),V.updateValue("url",D)),(a=(a=a.sessionData)&&a.itct)&&V.api.setTrackingParams(V.element,a));C++}m.ariaBusy="false";g.gy(this.element,
"ytp-endscreen-paginate",C<X);for(L=this.stills.length-1;L>=C;L--)n=this.stills[L],g.IL(n.element),g.gt(n);this.stills.length=C}}onVideoDataChange(){const L=this.player.getVideoData(1);this.videoData!==L&&(L?.C()?(this.U=0,this.videoData=L,this.O()):this.player.kU("missg",{vid:L?.videoId||"",cpn:L?.clientPlaybackNonce||""}))}KI(){this.U+=this.stills.length;this.O()}xU(){this.U-=this.stills.length;this.O()}Wv(){return this.W.W()}C(L){L===1?(this.T=!1,this.S=this.videoData.clientPlaybackNonce,this.W.O(),
this.Lu&&this.O()):(this.T=!0,this.Lu&&jM(this)&&(L===2?this.W.U():L===3&&this.W.G()))}nI(L){if(L){for(L=0;L<this.stills.length;L++)this.K.logVisibility(this.stills[L].element,!0);this.C(1)}else this.S=null,this.T=!1;this.O()}s6(){return this.Lu&&jM(this)}};var np_=class extends g.y{constructor(L){super({Z:"button",rd:["ytp-watch-on-youtube-button","ytp-button"],Go:"{{content}}"});this.K=L;this.buttonType=this.buttonType=1;this.W();this.buttonType===2&&g.lV(this.element,"ytp-continue-watching-button");this.listen("click",this.onClick);this.listen("videodatachange",this.W);this.EK(!0)}W(){let L,m;switch(this.buttonType){case 1:L="\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u043d\u043e\u0432\u0430 \u043d\u0430 YouTube";m=156915;
break;case 2:L="\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u043d\u0430 YouTube";m=156942;break;default:L="\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u043d\u0430 YouTube",m=156942}this.update({content:L});this.K.hasVe(this.element)&&this.K.destroyVe(this.element);this.K.createClientVe(this.element,this,m)}onClick(L){this.K.N("web_player_log_click_before_generating_ve_conversion_params")&&
this.K.logClick(this.element);g.Dg(this.getVideoUrl(),this.K,L);this.K.N("web_player_log_click_before_generating_ve_conversion_params")||this.K.logClick(this.element)}getVideoUrl(){var L=!0;switch(this.buttonType){case 1:L=!0;break;case 2:L=!1}L=this.K.getVideoUrl(L,!1,!1,!0);const m=this.K.D();if(g.Bo(m)){const n={};g.Bo(m)&&g.pn(this.K,"addEmbedsConversionTrackingParams",[n]);L=g.Fk(L,n)}return L}logVisibility(){this.K.logVisibility(this.element,this.Lu&&this.wd)}show(){super.show();this.logVisibility()}hide(){super.hide();
this.logVisibility()}wV(L){super.wV(L);this.logVisibility()}};var CwZ=class extends Lo{constructor(L){super(L,"watch-again-on-youtube-endscreen");this.watchButton=new np_(L);g.J(this,this.watchButton);this.watchButton.sN(this.element);g.z$Z(L)&&(this.W=new g.yAF(L),g.J(this,this.W),this.O=new g.y({Z:"div",rd:["ytp-watch-again-on-youtube-endscreen-more-videos-container"],Y:{tabIndex:"-1"},V:[this.W]}),g.J(this,this.O),this.W.sN(this.O.element),this.O.sN(this.element));L.createClientVe(this.element,this,156914);this.hide()}hasSuggestions(){return this.W?.hasSuggestions()}show(){if(this.player.getPlayerState()!==
3){super.show();const m=this.O;if(m){var L=this.W.hasSuggestions();g.gy(this.element,"ytp-shorts-branded-ui",L);L?m.show():m.hide()}g.r2(this.player)?.oe(!0);this.player.logVisibility(this.element,!0);this.watchButton.wV(!0)}}hide(){super.hide();g.r2(this.player)?.oe(!1);this.player.logVisibility(this.element,!1);this.watchButton.wV(!1)}};g.pw("endscreen",class extends g.Sn{constructor(L){super(L);this.endScreen=null;this.W=this.O=this.J=!1;this.listeners=new g.X7(this);g.J(this,this.listeners);const m=L.D();L.isEmbedsShortsMode()?this.endScreen=new CwZ(L):GfZ(L)?(this.J=!0,dep(this),this.W?this.endScreen=new jWD(L):m.N("delhi_modern_endscreen")?this.endScreen=new oTw(L):this.endScreen=new mio(L)):m.I6?this.endScreen=new cup(L):this.endScreen=new Lo(L);g.J(this,this.endScreen);g.mG(L,this.endScreen.element,4);Kwr(this);this.listeners.A(L,
"videodatachange",this.onVideoDataChange,this);this.listeners.A(L,g.lD("endscreen"),n=>{this.onCueRangeEnter(n)});
this.listeners.A(L,g.RD("endscreen"),n=>{this.onCueRangeExit(n)})}b2(){var L=this.player.getVideoData();
const m=L.mutedAutoplay&&(L.limitedPlaybackDurationInSeconds>0||L.endSeconds>0||L.mutedAutoplayDurationMode!==2);if(this.player.isEmbedsShortsMode()&&!m)return!0;var n=!(!L?.C()&&!L?.suggestions?.length);n=!GfZ(this.player)||n;L=L.GM;const C=this.player.QN();return n&&!L&&!C&&!m}s6(){return this.endScreen.s6()}xs(){return this.s6()?this.endScreen.Wv():!1}b1(){this.player.lL("endscreen");super.b1()}load(){{const n=this.player.getVideoData(),C=n.transitionEndpointAtEndOfStream;if(C&&C.videoId){var L=
this.player.sK().wu.get("heartbeat");var m=n.C();!m||C.videoId!==m.videoId||n.JU?(this.player.sV(C.videoId,void 0,void 0,!0,!0,C),L&&L.sX("HEARTBEAT_ACTION_TRIGGER_AT_STREAM_END","HEARTBEAT_ACTION_TRANSITION_REASON_HAS_NEW_STREAM_TRANSITION_ENDPOINT"),L=!0):L=!1}else L=!1}L||(super.load(),this.endScreen.show())}unload(){super.unload();this.endScreen.hide();this.endScreen.destroy()}onCueRangeEnter(L){this.b2()&&(this.endScreen.created||this.endScreen.create(),L.getId()==="load"&&this.load())}onCueRangeExit(L){L.getId()===
"load"&&this.loaded&&this.unload()}onVideoDataChange(){Kwr(this);this.J&&dep(this)&&(this.endScreen&&(this.endScreen.hide(),this.endScreen.created&&this.endScreen.destroy(),this.endScreen.dispose()),this.W?this.endScreen=new jWD(this.player):this.endScreen=new mio(this.player),g.J(this,this.endScreen),g.mG(this.player,this.endScreen.element,4))}});})(_yt_player);
