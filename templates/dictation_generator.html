<!DOCTYPE html>
<html>

<head>
    <title>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –¥–∏–∫—Ç–∞–Ω—Ç–æ–≤</title>
    <link rel="stylesheet" href="/static/style.css">
    <link rel="stylesheet" href="/static/style_dictation_generator.css">

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <!-- FancyTree -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery.fancytree@2/dist/skin-lion/ui.fancytree.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery.fancytree@2.38.2/dist/jquery.fancytree-all-deps.min.js"></script>

    <!-- WaveSurfer -->
    <link rel="icon" href="data:,"> <!-- –ü—É—Å—Ç–∞—è –∏–∫–æ–Ω–∫–∞ -->
    <script src="https://unpkg.com/wavesurfer.js@6.6.2/dist/wavesurfer.min.js"></script>
    <script src="https://unpkg.com/wavesurfer.js@6.6.2/dist/plugin/wavesurfer.regions.min.js"></script>
</head>

<body>
    <div class="topbar">
        <h1>DikteApp</h1>
        <div class="user-panel">
            <h1 id="user">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</h1>
        </div>
    </div>


    <div class="panel">
        <div class="container" style="display: flex">
            <div id="langPair" data-original="{{ original_language }}" data-translation="{{ translation_language }}">
                {{ original_language }} ‚áí {{ translation_language }}
            </div>
            <h1 id="dictation-id">–ù–æ–≤—ã–π –¥–∏–∫—Ç–∞–Ω—Ç: </h1>
        </div>


        <div class="container">
            <div style="display: flex; align-items: center; gap: 10px;">
                <div class="tooltip-wrapper">
                    <button id="openTreeDialogBtn" onclick="openCategoryModal('root')">‚ãØ</button>
                    <pre class="tooltip-text">–í—ã–±—Ä–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é</pre> <!-- –ø–æ–¥—Å–∫–∞–∑–∫–∞ -->
                </div>
                <pre id="modalTitle">–ö–∞—Ç–µ–≥–æ—Ä–∏—è: </pre>
                <!-- –î–∏–∞–ª–æ–≥–æ–≤–æ–µ –æ–∫–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–µ—Ä–µ–≤–æ–º -->
                <div id="modalOverlay" class="modal-overlay"></div>
                <div id="categoryModal" class="modal" style="display:none;">
                    <h4>–í—ã–±–µ—Ä–∏—Ç–µ –≤–µ—Ç–∫—É</h4>
                    <div id="treeContainer"></div>

                    <div class="tooltip-wrapper">
                        <button id="btnAddNode"> ‚ûï </button>
                        <div class="tooltip-text">–ù–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç</div> <!-- –ø–æ–¥—Å–∫–∞–∑–∫–∞ -->
                    </div>

                    <div class="tooltip-wrapper">
                        <button id="btnDeleteNode"> üóëÔ∏è </button>
                        <div class="tooltip-text">–£–¥–∞–ª–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç</div> <!-- –ø–æ–¥—Å–∫–∞–∑–∫–∞ -->
                    </div>

                    <div class="tooltip-wrapper">
                        <button id="btnCancelCategory">‚ùå </button>
                        <div class="tooltip-text">–û—Ç–º–µ–Ω–∞</div> <!-- –ø–æ–¥—Å–∫–∞–∑–∫–∞ -->
                    </div>

                    <div class="tooltip-wrapper">
                        <button id="btnSelectCategory">‚úÖ </button>
                        <div class="tooltip-text">–í—ã–±—Ä–∞—Ç—å</div> <!-- –ø–æ–¥—Å–∫–∞–∑–∫–∞ -->
                    </div>
                </div>
                <!-- –æ–Ω–æ–∫–Ω—á–∞–Ω–∏–µ ---- –î–∏–∞–ª–æ–≥–æ–≤–æ–≥–æ –æ–∫–Ω–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–µ—Ä–µ–≤–æ–º -->
            </div>
        </div>

        <label>Title:</label>
        <div class="form-group-line">
            <label>{{ original_language }}:</label>
            <input type="text" id="title" required>
        </div>
        <div class="form-group-line">
            <label>{{ translation_language }}:</label>
            <input type="text" id="title_translation" required>
        </div>

        <div class="form-group-line">
            <label>–ó–∞–≥—Ä—É–∑–∏—Ç—å –∞—É–¥–∏–æ:</label>
            <!-- <input type="file" id="audioFile" accept="audio/*"> -->
            <!-- –°–ø—Ä—è—Ç–∞–Ω–Ω–æ–µ –Ω–∞—Å—Ç–æ—è—â–µ–µ –ø–æ–ª–µ –≤—ã–±–æ—Ä–∞ -->
            <input type="file" id="audioFile" accept="audio/*" style="display: none;">

            <!-- –ö—Ä–∞—Å–∏–≤–∞—è –ª–æ–∂–Ω–∞—è –∫–Ω–æ–ø–∫–∞ -->
            <button id="fakeAudioFileBtn">...</button>

            <!-- –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞—Ç—É—Å -->
            <div id="audioFileStatus" class="small-info">–§–∞–π–ª –Ω–µ –≤—ã–±—Ä–∞–Ω</div>
        </div>

        <div class="toggle-panel">
            <div class="toggle-header" onclick="togglePanel(this)">
                <span class="arrow">‚ñ∂</span>
                <span class="title">–ê—É–¥–∏–æ</span>
            </div>
            <div class="toggle-content">
                <label>(1) –¢–µ–∫—É—â–µ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ</label>

                <div id="waveWrapper">
                    <div id="waveform"></div>
                </div>

                <div class="controls-row">
                    <button id="playPauseBtn" onclick="funClick()">‚ñ∂Ô∏è</button>
                    <div class="time-fields">
                        <!-- Start: <span id="startTime">‚Äì</span> ‚Äî End: <span id="endTime">‚Äì</span> -->
                        <label for="startTime">Start:</label>
                        <input type="number" id="startTime" step="0.01" min="0" size="6">

                        <label for="endTime">End:</label>
                        <input type="number" id="endTime" step="0.01" min="0" size="6">
                    </div>
                </div>
            </div>
        </div>

        <div class="toggle-panel inner-toggle">
            <div class="toggle-header" onclick="togglePanel(this)">
                <span class="arrow">‚ñ∂</span>
                <span class="title">–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∏–∑ –∞—É–¥–∏–æ</span>
            </div>
            <div id="formGroupRaw" class="form-group form-raw toggle-content inner-toggle">
                <button id="recognize_words_btn">–†—Å–ø–æ–∑–Ω–∞—Ç—å —Å–ª–≤–∞ –∏–∑ –∞—É–¥–∏–æ</button>
                <div class="form-group">
                    <label>–í—Ä–µ–º—è-—Å–ª–æ–≤–æ:</label>
                    <textarea id="text_time_word" rows="5"></textarea>
                </div>
            </div>
        </div>


        <div class="toggle-panel">
            <div class="toggle-header" onclick="togglePanel(this)">
                <span class="arrow">‚ñ∂</span>
                <span class="title">–¢–µ–∫—Å—Ç –ø–æ —Ñ—Ä–∞–∑–∞–º</span>
            </div>
            <div id="formGroupRaw" class="form-group form-raw toggle-content">
                <div class="form-group">
                    <label>–¢–µ–∫—Å—Ç –ø–æ —Ñ—Ä–∞–∑–∞–º (/* –ø—Ä–µ–≤–æ–¥):</label>
                    <textarea id="text" rows="10"></textarea>
                </div>
                <button id="split-btn">–†–∞–∑–±–∏—Ç—å –Ω–∞ —Ñ—Ä–∞–∑—ã –∏ –æ–∑–≤—É—á–∏—Ç—å</button>
            </div>
        </div>

        <table id="sentences-table">
            <thead>
                <tr>
                    <th>‚Ññ</th>
                    <th>–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ (–æ—Ä–∏–≥–∏–Ω–∞–ª/–ø–µ—Ä–µ–≤–æ–¥)</th>
                    <th>–ó–∞–ø–∏—Å—å</th>
                    <th>–ê—É–¥–∏–æ</th>
                    <th class="audio-dependent-column-display ">Start</th>
                    <th class="audio-dependent-column-display ">End</th>
                    <th class="audio-dependent-column-display ">Status</th>
                    <th class="audio-dependent-column-display ">–ò—Å—Ç–æ—á–Ω–∏–∫</th>
                </tr>
            </thead>
            <tbody>
                <!-- –°—Ç—Ä–æ–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —á–µ—Ä–µ–∑ JavaScript -->
            </tbody>
        </table>

    </div>


    <!-- <script type="application/json">
        window.dictationId = "{{ dictation_id }}";
        window.editMode = {{ edit_mode | tojson }};
    </script> -->
    <script id="init-data" type="application/json">
    {{ {
        "dictation_id": dictation_id,
        "editMode": edit_mode,
        "original_language": original_language,
        "translation_language": translation_language,
       "original_data": original_data,
        "translation_data": translation_data,
        "audio_file": audio_file,
        "title": title,
        "level": level,
        "audio_words": audio_words
     } | tojson }}
    </script>
    <script src="{{ url_for('static', filename='script_dictation_generator.js') }}"></script>
</body>

</html>