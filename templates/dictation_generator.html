<!DOCTYPE html>
<html>

<head>
    <title>Генератор диктантов</title>
    <link rel="stylesheet" href="/static/style.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='style_dictation_generator.css') }}">
    <!-- fancytree CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery.fancytree@2/dist/skin-lion/ui.fancytree.min.css">

    <!-- fancytree  JS -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery-ui-dist/jquery-ui.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery.fancytree@2/dist/jquery.fancytree-all-deps.min.js"></script>
</head>

<body>
    <div class="topbar">
        <h1>DikteApp</h1>
        <div class="user-panel">
            <button id="language-toggle">
                <img src="{{ url_for('static', filename='flags/ru.svg') }}" width="20">
                <span>RU</span>
            </button>
            <span>Пользователь</span>
        </div>
    </div>

    <div class="container" style="display: flex">
        <div class="settings">
            <select id="language">
                <option value="en">en</option>
                <option value="tr">tr</option>
            </select>
        </div>
        <h1 id="dictation-id">Новый диктант</h1>
    </div>



    <div class="container">
        <div style="display: flex; align-items: center; gap: 10px;">
            <div class="tooltip-wrapper">
                <button id="openTreeDialogBtn" onclick="openTreeDialog()">⋯</button>
                <pre class="tooltip-text">Выбрать категорию</pre> <!-- подсказка -->
            </div>
            <pre id="modalTitle">ни входит ни в одну группу</pre>
            <!-- Диалоговое окно для работы с деревом -->
            <div id="modalOverlay" class="modal-overlay"></div>
            <div id="modal" class="modal" style="display:none;">
                <h4>Выберите ветку</h4>
                <div id="treeContainer"></div>

                <div class="tooltip-wrapper">
                    <button id="cancelBtn"> X </button>
                    <div class="tooltip-text">Закрыть без сохранения</div> <!-- подсказка -->
                </div>

                <div class="tooltip-wrapper">
                    <button id="saveBtn"> V </button>
                    <div class="tooltip-text">Выбрать и закрыть</div> <!-- подсказка -->
                </div>
            </div>
            <!-- онокнчание ---- Диалогового окна для работы с деревом -->
        </div>
    </div>


    <div class="form-group">
        <label>Title (English):</label>
        <input type="text" id="title" required>
    </div>
    <div class="form-group">
        <label>Title (Russian):</label>
        <input type="text" id="title_translation" required>
    </div>



    <div class="form-group">
        <label>Текст (по предложениям):</label>
        <textarea id="text" rows="10"></textarea>
    </div>
    <button id="split-btn">Разбить на предложения</button>



    <table id="sentences-table">
        <thead>
            <tr>
                <th>№</th>
                <th>Предложение (оригинал/перевод)</th>
                <th>Аудио</th>
            </tr>
        </thead>
        <tbody>
            <!-- Строки будут добавляться через JavaScript -->
        </tbody>
    </table>

    <button id="save-btn" onclick="saveDictation()">Сохранить JSON + MP3</button>


    <script src="{{ url_for('static', filename='script_dictation_generator.js') }}"></script>
</body>

</html>